<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head::head('글쓰기')}"></head>
<link rel="stylesheet" th:href="@{/css/write.css}">
<body>

<header th:replace="~{fragments/header}"></header>

<main>
    <div class="write-container">
        <h1>글쓰기</h1>

        <form th:action="@{/board/write}" method="post" th:object="${boardDto}">
            <!-- 제목 -->
            <div class="mb-4">
                <label>제목</label>
                <input type="text" th:field="*{title}" placeholder="제목을 입력하세요" required>
            </div>

            <!-- 글쓴이 -->
            <div class="mb-4">
                <label>글쓴이</label>
                <input type="text" th:field="*{writer}"
                       th:value="${session.loggedMember.userName}" readonly>
            </div>

            <!-- 내용 -->
            <div class="mb-4">
                <label>내용</label>
                <textarea th:field="*{content}" placeholder="내용을 입력하세요" rows="10" required></textarea>
            </div>

            <!-- 비밀글 옵션 -->
            <div class="secret-section">
                <label>
                    <input type="checkbox" th:field="*{secretFlag}" value="1" id="secretCheck">
                    비밀글로 설정
                </label>

                <div id="secretPwContainer" class="hidden">
                    <label>비밀글 비밀번호</label>
                    <input type="password" th:field="*{secretPw}" id="secretPwInput"
                           placeholder="입력하지 않으면 회원 비밀번호로 설정됩니다">
                </div>
            </div>

            <!-- 버튼 -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary w-full">등록</button>
            </div>
        </form>
    </div>
</main>

<footer th:replace="~{fragments/footer::footer-sns}"></footer>

<script>
    const check = document.getElementById("secretCheck");
    const container = document.getElementById("secretPwContainer");
    const input = document.getElementById("secretPwInput");

    check.addEventListener("change", () => {
        if (check.checked) {
            container.classList.remove("hidden");
        } else {
            container.classList.add("hidden");
            input.value = "";
        }
    });
</script>
</body>
</html>
